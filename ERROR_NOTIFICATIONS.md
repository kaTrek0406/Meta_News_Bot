# üîî –°–∏—Å—Ç–µ–º–∞ —É–º–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö

## –ß—Ç–æ —ç—Ç–æ?

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–∞–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö **—Ç–æ–ª—å–∫–æ –≤ Telegram** (–∫–∞–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É), —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ –±—ã—Å—Ç—Ä–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã.

---

## üéØ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —à—É–º–∞**
- ‚ùå –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –æ—à–∏–±–∫–∏ —á–∞—â–µ —Ä–∞–∑–∞ –≤ —á–∞—Å
- ‚ùå –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–∂–∏–¥–∞–µ–º—ã–µ –æ—à–∏–±–∫–∏ (Chat not found, no_peer)
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã–µ –∏ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 2. **–£—Ä–æ–≤–Ω–∏ –≤–∞–∂–Ω–æ—Å—Ç–∏**

| –£—Ä–æ–≤–µ–Ω—å | –ò–∫–æ–Ω–∫–∞ | –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è | –ü—Ä–∏–º–µ—Ä—ã |
|---------|--------|-------------------|---------|
| **üî¥ CRITICAL** | –í—Å–µ–≥–¥–∞ | –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã | Token invalid, Access denied |
| **üü† HIGH** | –° —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π | –í–∞–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ | Connection timeout, Network error |
| **üü° MEDIUM** | –†–∞–∑ –≤ —á–∞—Å | –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã | 502, 503, Rate limit |
| **üü¢ LOW** | –¢–æ–ª—å–∫–æ –≤ —Å–≤–æ–¥–∫–µ | –û–∂–∏–¥–∞–µ–º—ã–µ | Chat not found, 403 Forbidden |

### 3. **–°–≤–æ–¥–∫–∞ –ø–æ –æ—à–∏–±–∫–∞–º**
–ï—Å–ª–∏ > 30% –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–ª–∏ –æ—à–∏–±–∫—É - –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —Å–≤–æ–¥–∫—É:
```
üìä –°–≤–æ–¥–∫–∞ –ø–æ –æ—à–∏–±–∫–∞–º

–í—Å–µ–≥–æ –æ—à–∏–±–æ–∫: 8
–¢–∏–ø–æ–≤ –æ—à–∏–±–æ–∫: 3

1. Server error '502 no_peer'
   –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 5
   –ò—Å—Ç–æ—á–Ω–∏–∫–∏: news_dev, news_policy, news_product
   
2. 403 Forbidden
   –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 2
   –ò—Å—Ç–æ—á–Ω–∏–∫–∏: news_product, news_product

üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /refresh –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–∏
```

---

## üì± –ü—Ä–∏–º–µ—Ä—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –ü—Ä–∏–º–µ—Ä 1: –ö—Ä–∏—Ç–∏—á–Ω–∞—è –æ—à–∏–±–∫–∞
```
üî¥ –û—à–∏–±–∫–∞ –≤ –±–æ—Ç–µ
–¢–∏–ø: Critical Error
–£—Ä–æ–≤–µ–Ω—å: CRITICAL

–°–æ–æ–±—â–µ–Ω–∏–µ:
Bot token is invalid

üïê 2025-10-14 21:25:00
```

### –ü—Ä–∏–º–µ—Ä 2: –û—à–∏–±–∫–∞ —Å–µ—Ç–∏
```
üü† –û—à–∏–±–∫–∞ –≤ –±–æ—Ç–µ
–¢–∏–ø: Network Error
–£—Ä–æ–≤–µ–Ω—å: HIGH

–°–æ–æ–±—â–µ–Ω–∏–µ:
Connection timeout after 30s

–ö–æ–Ω—Ç–µ–∫—Å—Ç:
‚Ä¢ URL: https://www.facebook.com/business/help/...

üïê 2025-10-14 21:25:00
```

### –ü—Ä–∏–º–µ—Ä 3: –û—à–∏–±–∫–∞ –ø—Ä–æ–∫—Å–∏
```
üü† –û—à–∏–±–∫–∞ –≤ –±–æ—Ç–µ
–¢–∏–ø: Proxy Error
–£—Ä–æ–≤–µ–Ω—å: HIGH

–°–æ–æ–±—â–µ–Ω–∏–µ:
Proxy authentication failed

üïê 2025-10-14 21:25:00
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ!

–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ –≤–∞—à Telegram:
```env
TELEGRAM_DEV_CHAT_ID=527824690  # –í–∞—à ID
```

### –û—Ç–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å:
```env
# –í Railway —É–¥–∞–ª–∏—Ç–µ –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ:
# TELEGRAM_DEV_CHAT_ID=
```

---

## üîç –ö–∞–∫–∏–µ –æ—à–∏–±–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è

### ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:

1. **–ö—Ä–∏—Ç–∏—á–Ω—ã–µ:**
   - –ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–æ–∫–µ–Ω–æ–º –±–æ—Ç–∞
   - –û—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
   - –û—Ç–∫–∞–∑ –≤ –¥–æ—Å—Ç—É–ø–µ

2. **–í–∞–∂–Ω—ã–µ:**
   - –¢–∞–π–º–∞—É—Ç—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –°–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏
   - –ü–∞–¥–µ–Ω–∏—è –ø–∞—Ä—Å–µ—Ä–∞

3. **–°—Ä–µ–¥–Ω–∏–µ (—Ä–∞–∑ –≤ —á–∞—Å):**
   - –û—à–∏–±–∫–∏ 502, 503
   - Rate limiting (429)
   - –í—Ä–µ–º–µ–Ω–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ Facebook

### ‚ùå –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è:

1. **–û–∂–∏–¥–∞–µ–º—ã–µ:**
   - Chat not found (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª–∏–ª –±–æ—Ç–∞)
   - 403 Forbidden –æ—Ç WhatsApp (–æ–∂–∏–¥–∞–µ–º–æ)
   - no_peer –æ—Ç –ø—Ä–æ–∫—Å–∏ (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

2. **–î—É–±–ª–∏–∫–∞—Ç—ã:**
   - –û–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –æ—à–∏–±–∫–∞ —á–∞—â–µ —Ä–∞–∑–∞ –≤ —á–∞—Å

---

## üìä –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 1. –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å—Ä–∞–∑—É –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏:
- –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏
- –í–∞–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)
- –û—à–∏–±–∫–∏ –ø—Ä–æ–∫—Å–∏

### 2. –°–≤–æ–¥–∫–∞ –ø–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –µ—Å–ª–∏ > 30% –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å –æ—à–∏–±–∫–∞–º–∏:
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–∏–ø–∞–º
- –¢–æ–ø-3 —Ç–∏–ø–∞ –æ—à–∏–±–æ–∫
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

---

## üéõÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤

### –ò–∑–º–µ–Ω–∏—Ç—å cooldown (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1 —á–∞—Å)

–û—Ç–∫—Ä–æ–π—Ç–µ `src/error_notifier.py` –∏ –∏–∑–º–µ–Ω–∏—Ç–µ:
```python
_ERROR_COOLDOWN = timedelta(hours=1)  # –ë—ã–ª–æ
_ERROR_COOLDOWN = timedelta(minutes=30)  # –°—Ç–∞–ª–æ (30 –º–∏–Ω—É—Ç)
```

### –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä–æ–≥ –¥–ª—è —Å–≤–æ–¥–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30%)

–û—Ç–∫—Ä–æ–π—Ç–µ `src/error_notifier.py` –∏ –∏–∑–º–µ–Ω–∏—Ç–µ:
```python
if error_rate > 0.3:  # –ë—ã–ª–æ (30%)
if error_rate > 0.5:  # –°—Ç–∞–ª–æ (50%)
```

---

## üö® –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –í –∫–æ–¥–µ –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é:

```python
from src.error_notifier import (
    notify_error,
    notify_network_error,
    notify_proxy_error,
    notify_critical
)

# –û–±—â–∞—è –æ—à–∏–±–∫–∞
await notify_error("Custom Error", "Something went wrong")

# –û—à–∏–±–∫–∞ —Å–µ—Ç–∏
await notify_network_error(url, "Connection timeout")

# –ö—Ä–∏—Ç–∏—á–Ω–∞—è (–≤—Å–µ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è)
await notify_critical("Database is down!", {"server": "prod-1"})
```

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ß—Ç–æ –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å:

**–ï–∂–µ–¥–Ω–µ–≤–Ω–æ (–µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã):**
- –°–≤–æ–¥–∫–∞ –ø–æ –æ—à–∏–±–∫–∞–º –ø–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ (–µ—Å–ª–∏ > 30% –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤)

**–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (–ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏):**
- –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ (–≤—Å–µ–≥–¥–∞)
- –í–∞–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ (—Ä–∞–∑ –≤ —á–∞—Å)
- –û—à–∏–±–∫–∏ –ø—Ä–æ–∫—Å–∏ (–≤—Å–µ–≥–¥–∞)

**–ù–∏–∫–æ–≥–¥–∞:**
- –û–∂–∏–¥–∞–µ–º—ã–µ –æ—à–∏–±–∫–∏ (Chat not found, no_peer)
- –î—É–±–ª–∏–∫–∞—Ç—ã –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –†–µ–∞–≥–∏—Ä—É–π—Ç–µ –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ (üî¥)
–≠—Ç–∏ –æ—à–∏–±–∫–∏ —Ç—Ä–µ–±—É—é—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω—ã –∏ credentials
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway

### 2. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –≤–∞–∂–Ω—ã–µ (üü†)
–≠—Ç–∏ –æ—à–∏–±–∫–∏ –º–æ–≥—É—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã:
- –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∫—Å–∏
- –°–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- –ü—Ä–æ–±–ª–µ–º—ã –ø–∞—Ä—Å–∏–Ω–≥–∞

### 3. –ò–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ –Ω–∏–∑–∫–∏–µ (üü¢)
–≠—Ç–∏ –æ—à–∏–±–∫–∏ –æ–∂–∏–¥–∞–µ–º—ã –∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –¥–µ–π—Å—Ç–≤–∏–π:
- Chat not found - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª–∏–ª –±–æ—Ç–∞
- 403 –æ—Ç WhatsApp - –∏–∑–≤–µ—Å—Ç–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞
- no_peer - –≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –ø—Ä–æ–∫—Å–∏

---

## üîß Troubleshooting

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. `TELEGRAM_DEV_CHAT_ID` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Railway
2. –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
3. –í–∞—à Telegram ID –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å ID –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ @userinfobot**

### –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–≤–µ–ª–∏—á—å—Ç–µ cooldown —Å 1 —á–∞—Å–∞ –¥–æ 3-6 —á–∞—Å–æ–≤
2. –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä–æ–≥ —Å–≤–æ–¥–∫–∏ —Å 30% –¥–æ 50%
3. –î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ –æ—à–∏–±–æ–∫ –≤ "low" –∫–∞—Ç–µ–≥–æ—Ä–∏—é

### –ù–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤–∞–∂–Ω—ã–µ –æ—à–∏–±–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—é –≤ `_classify_error()`
2. –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –≤ "critical" –∏–ª–∏ "high"
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `force=True` –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!

**–í—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å:**
- üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ - –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
- üü† –í–∞–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ - —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π (—Ä–∞–∑ –≤ —á–∞—Å)
- üìä –°–≤–æ–¥–∫–∞ –ø–æ –æ—à–∏–±–∫–∞–º - –µ—Å–ª–∏ > 30% –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

**–í—ã –ù–ï –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å:**
- –°–ø–∞–º –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏
- –û–∂–∏–¥–∞–µ–º—ã–µ –æ—à–∏–±–∫–∏ (Chat not found, no_peer)
- –ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**–¢–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç–µ —Å–ø–æ–∫–æ–π–Ω–æ —Å–ø–∞—Ç—å! üò¥ –ë–æ—Ç —Å–∞–º –≤–∞—Å –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥—ë—Ç –Ω–µ —Ç–∞–∫.** üöÄ
